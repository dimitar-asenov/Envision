<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Envision: Compiling Envision from source</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Envision
   </div>
   <div id="projectbrief">A visual programming IDE for object-oriented languages</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Compiling Envision from source </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Envision is written in C++14 and uses the CMake build system.</p>
<p>You will need GCC version 5.1 or newer and at least CMake 3.2.2 to compile the sources. You can check your current versions with: </p><pre class="fragment">g++ --version
cmake --version
</pre><p> In Ubuntu, you can easily get compiler updates by adding the following PPA: </p><pre class="fragment">sudo add-apt-repository ppa:ubuntu-toolchain-r/test
sudo apt-get update &amp;&amp; sudo apt-get upgrade
</pre><p> Other dependencies are:</p><ul>
<li><b>Qt 5.5 or later</b>: <a href="http://qt.io">http://qt.io</a> <br />
 This is the underlying framework that we use to build Envision's visualizations and cross-platform support.</li>
<li><b>lp_solve 5.5</b>: <a href="http://lpsolve.sourceforge.net/">http://lpsolve.sourceforge.net/</a> <br />
 Lp Solve is used for calculating some of the more complex visualization layouts.</li>
<li><b>Clang 3.8</b>: <a href="http://clang.llvm.org/">http://clang.llvm.org/</a> <br />
 Clang is used for importing C++ projects in Envision. Support for importing C++ is preliminary and incomplete.</li>
<li><b>libgit2</b>: <a href="https://libgit2.github.com/">https://libgit2.github.com/</a> <br />
 Used for Envision's git-based version control.</li>
<li><b>Python 3</b>: <a href="https://www.python.org/">https://www.python.org/</a> <br />
 Used for various scripts during building, testing and run-time execution (e.g. for information scripting).</li>
<li><b>Boost python</b>: <a href="http://www.boost.org/doc/libs/1_58_0/libs/python/doc/">http://www.boost.org/doc/libs/1_58_0/libs/python/doc/</a> <br />
 Used for information scripting</li>
<li><b>libedit</b>: <a href="http://thrysoee.dk/editline/">http://thrysoee.dk/editline/</a> <br />
 Needed by the Clang tooling for the python wrapper generator project.</li>
<li><b>On Linux: Google Performance Tools</b>: <a href="http://code.google.com/p/gperftools/">http://code.google.com/p/gperftools/</a> <br />
 Used for profiling.</li>
<li><b>For development only: Vera ++ </b>: <a href="https://bitbucket.org/verateam/vera">https://bitbucket.org/verateam/vera</a> <br />
 Used for checking the code formatting style. Boost python is used to provide bindings for the python scripting.</li>
<li><b>For the Java import tool only: Gradle </b>: <a href="http://gradle.org/">http://gradle.org/</a> <br />
 Used as build script for the JavaImportTool.</li>
</ul>
<p>To install the dependencies on Ubuntu 16.04, run the following:</p><ol type="1">
<li>Install all necessary packages: <pre class="fragment">sudo apt-get install qt-sdk libqt5svg5 libqt5svg5-dev libqt5webkit5 libqt5webkit5-dev lp-solve liblpsolve55-dev libclang-3.8-dev clang-3.8 llvm-3.8 libgit2-dev google-perftools libgoogle-perftools-dev vera++ python3-dev libboost-python-dev libedit-dev </pre></li>
<li>Make the following symbolic link needed to use the shared library of lp solve: <pre class="fragment">sudo ln -s /usr/lib/lp_solve/liblpsolve55.so /usr/lib/liblpsolve55.so </pre></li>
<li>If you plan on using the C++ import feature you will also need an additional symbolic link to the clang libraries directly in main directory of Envision's source: <pre class="fragment">Envision$ ln -s /usr/lib/llvm-3.8/lib/ lib </pre></li>
<li>If you plan on using the JavaImportTool you will need Gradle: <pre class="fragment">sudo apt-get install gradle </pre></li>
</ol>
<p>Envision's repository contains configuration files for both Qt Creator and Eclipse. You can choose which tool you want to use but we recommend Qt Creator. The instructions below show you how to set-up both IDEs.</p>
<h1><a class="anchor" id="qtcreator"></a>
Qt Creator</h1>
<ol type="1">
<li>Clone Envision's GitHub repository to a directory on your computer. Have in mind that during the build process Qt Creator will create additional directories alongside the repository clone (for the out-of-source build).</li>
<li>Start Qt Creator and configure the version of Qt that you want to use:<ul>
<li>Go to: Tools &gt; Options &gt; Build &amp; Run &gt; Qt Versions. Make sure that you are using Qt 5.5 or later. This could be either Qt in PATH, or a Qt version that you compiled yourself. See below for manual Qt compilation instructions.</li>
<li>Go to: Tools &gt; Options &gt; Build &amp; Run &gt; Kits. Make sure that the default desktop kit uses the appropriate version of Qt.</li>
</ul>
</li>
<li>Open the top-level <code>CMakeLists.txt</code> file with Qt Creator.</li>
<li>On Qt creator 3.x, use the following arguments for CMake<pre class="fragment">-DCMAKE_BUILD_TYPE=Debug </pre> or alternatively, if you want to compile with clang:<pre class="fragment">-DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_COMPILER=clang++-3.8 </pre></li>
<li>In the Projects view, under <em>build</em> make sure that:<ul>
<li>The build directory points to a directory that is a peer of Envision's directory. e.g. <pre class="fragment">../build-envision-Desktop-Debug</pre></li>
<li>(Qt creator 4 or later) the CMAKE_BUILD_TYPE variable is set to <em>Debug</em>.</li>
</ul>
</li>
<li>Also in the Projects view, change the arguments of cmake/make to specify parallel compilation and the <em>install</em> target: <pre class="fragment">-j8 install</pre> The <em>install</em> target is needed in order to copy all necessary files to the DebugBuild directory. Substitute 8 for the number of threads your hardware supports.</li>
<li>Add run configurations<ul>
<li>The executable of all run configurations must be Envision: <pre class="fragment">%{sourceDir}/DebugBuild/Envision</pre></li>
<li>The working directory of all run configurations must be DebugBuild: <pre class="fragment">%{sourceDir}/DebugBuild</pre></li>
<li>The arguments passed to Envision should at a minimum include: <pre class="fragment">-graphicssystem raster</pre></li>
<li>For each different test(demo) you want to run, make a new run configuration that also includes the appropriate argument. For example, to run the tests for the <a class="el" href="namespaceOOVisualization.html">OOVisualization</a> project: <pre class="fragment">-graphicssystem raster --test oovisualization</pre> To see the tests (demos) associated with a project, just supply its name, converted to lowercase, as the parameter to the <em>test</em> argument. Do not test more than one project at a time. See <a class="el" href="try_envision.html">here</a> for more details about the different demos.</li>
</ul>
</li>
<li>(Recommended) If you want to debug Envision using gdb, you might notice that gdb takes quite a while to load debug symbols. It is possible to postpone this load to happen as late as possible, thereby speeding startup.<ul>
<li>Go to: Tools &gt; Options &gt; Debugger &gt; GDB Extended and enable the "Attempt Quick Start" option. Additionally you might want to remove unnecessary debug symbols, such as for Qt WebKit which take a long time to load. If you compiled Qt manually using the approach outlined below, simply remove any ".debug" files you do not need from the "qt/qt5-build/lib" directory.</li>
</ul>
</li>
</ol>
<p>Note that you will need to compile the JavaImportTool project separately, if you want to experiment with showing a Java project inside Envision.</p>
<h1><a class="anchor" id="eclipse"></a>
Eclipse (recommended for Java; works for C++, but could require a lot of tweaking)</h1>
<ol type="1">
<li>Install the latest version of Eclipse.</li>
<li>Download and install the Qt Integration plug-in for Eclipse. This plug-in is, unfortunately, no longer supported and the latest version is quite outdated. Look for the file: <code>qt-eclipse-integration-linux.x86_64-1.6.1.tar.gz</code> </li>
<li>Start Eclipse and configure the version of Qt that you want to use. You can use the version provided by your system or you can point to a custom Qt version. See below for instructions on compiling the latest Qt version.</li>
<li>Clone Envision's GitHub repository to a directory on your computer. The project is structured in separate directories where each one is an Eclipse project.</li>
<li>Import all projects into your Eclipse workspace as Git projects. Eclipse/Qt might try to change some project files. Reject all requested changes.</li>
</ol>
<h1><a class="anchor" id="latestqt"></a>
Using the latest build of Qt</h1>
<p>To experiment with custom Qt features, you could compile the latest Qt development branch yourself.</p>
<p>If you want to compile and use the latest development version of Qt, you can simply run the <code>misc/use-qt5-dev.sh</code> script. It is designed for and tested with Ubuntu 14.04. Running the script will:</p><ol type="1">
<li>Install all dependencies required to compile Qt5 and Qt WebKit.</li>
<li>Download the latest Qt 5 development branches of all Qt modules in <code>qt/qt5-dev</code>.</li>
<li>Configure the build for a release version of Qt and WebKit with separate debug symbols.</li>
<li>Compile all Qt modules including WebKit using 8 threads. Note that this could take a few hours even on high end machines.</li>
<li>Install the compiled files in <code>qt/qt5-build</code>.</li>
<li>Make a symbolic link: <code>DebugBuild/qt</code> -&gt; <code>qt/qt5-build/lib</code>. This is needed for Envision to use the correct Qt version at run-time.</li>
</ol>
<p>After you run the script you will need to configure Qt Creator to the the newly built version of Qt and rebuild Envision.</p>
<h1><a class="anchor" id="try"></a>
Running Envision</h1>
<p>After you have compiled Envision give it a try! See <a class="el" href="try_envision.html">this page</a> for some interesting examples.</p>
<h1><a class="anchor" id="faq"></a>
Common problems</h1>
<p><b>Gcc crashes with a segmentation fault error when compiling Envision, what's wrong?</b><br />
 If you are running in a virtual machine, try increasing the amount of RAM of the machine. It should be at least 1 GB. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
