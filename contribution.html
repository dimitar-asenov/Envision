<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Envision: Contributing to Envision</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Envision
   </div>
   <div id="projectbrief">A visual programming IDE for object-oriented languages</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Contributing to Envision </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>All contributions to the Envision source code such as enhancements or bug fixes are much appreciated.</p>
<p>If you want to join the development effort please read the information on this page.</p>
<h1><a class="anchor" id="workflow"></a>
Workflow</h1>
<p>The main repository for the project is maintained by Dimitar and can be found <a href="https://github.com/dimitar-asenov/Envision">here</a>. There are two main branches:</p><ul>
<li><code>development</code> - Contains the latest changes and features. This branch is updated regularly, and any contributions should be based on it.</li>
<li><code>master</code> - The idea is that this branch contains a somewhat more stable version of the IDE. However currently, it simply contains an older version, that is occasionally synchronized with the <code>development</code> branch.</li>
</ul>
<p>Contributors should create their own forks of Envision on github and create a feature branch based on the <code>development</code> branch. Work on new features or bug fixes should be done in this branch and the branch should be rebased prior to being merged back into the <code>development</code> branch of the main Envision repository.</p>
<p>This simple workflow is sufficient for the small team of people who are currently contributing to Envision.</p>
<h1><a class="anchor" id="environment"></a>
Build environment and getting started</h1>
<p>For instructions on how to compile Envision see <a class="el" href="compilation.html">here</a>.</p>
<p>Introductory tutorials that you should read to familiarize yourself with Envision's model-view-controller implementation can be found <a class="el" href="dev_tutorials.html">here</a>.</p>
<h1><a class="anchor" id="style"></a>
Code style</h1>
<p>All contributions to Envision must adhere to the following coding guidelines.</p>
<h2><a class="anchor" id="editors"></a>
Setting up Eclipse and Qt Creator</h2>
<ul>
<li>License template - Please set the license template to the Envision BSD license file. You can find the LICENSE file in the main directory of the repository.<ul>
<li><em>Qt Creator</em>: Tools &gt; Options &gt; C++ &gt; File Naming &gt; License Template.</li>
<li><em>Eclipse</em>: Window &gt; Preferences &gt; C/C++ &gt; Code Style &gt; Code Templates &gt; <a class="el" href="namespaceComments.html">Comments</a> &gt; Files.</li>
</ul>
</li>
<li>Code style - Use the following code style configurations:<ul>
<li><em>Qt Creator</em>: <a href="EnvisionCodeStyleQtCreator.xml">style file</a>. Set up here: Tools &gt; Options &gt; C++ &gt; Code Style &gt; Import.</li>
<li><em>Eclipse</em>: <a href="EnvisionCodeStyleEclipse.xml">style file</a>. Set up here: Window &gt; Preferences &gt; C/C++ &gt; Code Style &gt; Formatter &gt; Import.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="formatting"></a>
Formatting and white space</h2>
<ul>
<li>Always use TABs for indentation and never spaces. Configure your editor to display a tab as 3 spaces.</li>
<li>Lines should be at most 120 characters. A TAB counts as 3 characters.</li>
<li>If the body of an <code>if</code>, <code>while</code>, or <code>for</code> is a single statement, do not use curly braces around it. If the condition and statement fit nicely on the same line write them on one line, otherwise put the statement on a newline: <div class="fragment"><div class="line"><span class="comment">// Wrong:</span></div><div class="line"><span class="keywordflow">if</span> (foo)</div><div class="line">{</div><div class="line">   bar();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (aMoreComplicatedOrMultilineCondition) anExtremelyLongAndComplicatedStatement();</div><div class="line"></div><div class="line"><span class="comment">// Correct:</span></div><div class="line"><span class="keywordflow">if</span> (foo) bar();</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (aMoreComplicatedOrMultilineCondition)</div><div class="line">   anExtremelyLongAndComplicatedStatement();</div></div><!-- fragment --></li>
<li>Curly braces should appear in a line on their own, except when using lambdas: <div class="fragment"><div class="line"><span class="comment">// Wrong:</span></div><div class="line"><span class="keywordflow">if</span> (foo) {</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Correct:</span></div><div class="line"><span class="keywordflow">if</span> (foo)</div><div class="line">{</div><div class="line">}</div></div><!-- fragment --></li>
<li>Leave a single space after a <code>//</code> comment delimiter.</li>
<li>For pointers or references, do not leave any space between the type and '*' or '&amp;', but write a single space between the '*' or '&amp;' and the variable name: <div class="fragment"><div class="line">QString&amp; string;</div><div class="line">Item* item;</div><div class="line"><span class="keyword">const</span> QString&amp; message;</div></div><!-- fragment --></li>
</ul>
<p>Of course you can always have a look at the existing code in case you are not sure about something. If you feel like some additional clarifications should be added here, let us know.</p>
<h2><a class="anchor" id="names"></a>
Naming</h2>
<p>All names in envision plug-in should use CamelCase:</p><ul>
<li>The names of type definitions (classes, structs, typedefs, using, enums, etc.) should start with a capital case letter.</li>
<li>Function, method, variable, and field names should start with a small case letter.</li>
<li>Field names should end with a trailing underscore (e.g. <code>data_</code>, instead of <code>data</code>): <div class="fragment"><div class="line"><span class="keyword">private</span>:</div><div class="line">   <span class="keywordtype">int</span> length_;</div><div class="line">   Item* myFirstItem_;</div></div><!-- fragment --></li>
<li>Names should be descriptive, especially names of function arguments. Avoid abbreviations and shortened words. The exception is the name of local variables, which can be short provided there is no ambiguity.</li>
<li>When declaring a class, list the members in the following order starting from the top: <code>public</code>, <code>protected</code>, <code>private</code>.</li>
<li>In the <code></code>.cpp file defining a class, define all members in the following order starting from the top: <code>static</code>, <code>constructors</code>, <code>destructors</code>, <code>the rest</code></li>
</ul>
<h2><a class="anchor" id="features"></a>
Language features</h2>
<ul>
<li>Strive for <a href="http://en.wikipedia.org/wiki/Const-correctness">const-correctness</a>.</li>
<li>Use exceptions Qt's assertions <code>Q_ASSERT</code>. Exceptions should be thrown in situation where a problem is caused due the user's input or the user's actions, and this problem can not be prevented in code. For all other situations you should use assertions. In particular use assertions to introduce checks at various places in the code where you expect the assertion to hold. The presumption should be that if an assertion fails, this indicates a buggy and incomplete code, and it is possible to fix this once and for all in the code.</li>
<li>Use RTTI where appropriate. Avoid C casts and use C++ casts instead: (<code>static_cast</code>, <code>dynamic_cast</code>, <code>const_cast</code>, <code>reinterpret_cast</code>). Better still, is to use the Envision provided <code>DCast</code>, instead of C++'s <code>dynamic_cast</code>, whenever possibly. <code>DCast</code> is faster but you can only use it if the class hierarchy you're trying to cast within supports it. These are currently all <code>Node</code> subclasses and all <code>Item</code> subclasses. Any other type can be made to support <code>DCast</code> by using the <code>Super</code> template to inherit from a base class and using the appropriate type id macros from <code>Core/src/reflect/typeIdMacros.h</code> </li>
<li>Make use of <a href="http://www.stroustrup.com/C++11FAQ.html">C++11 features</a>.</li>
<li>All class members should have a default initializer using the new C++11 syntax with curly braces in the class declaration: <div class="fragment"><div class="line"><span class="comment">// Wrong:</span></div><div class="line"><span class="keyword">class </span>PointAndItem</div><div class="line">{</div><div class="line">   <span class="keyword">public</span>:</div><div class="line">      PointAnditem();</div><div class="line">   <span class="keyword">private</span>:</div><div class="line">      <span class="keywordtype">int</span> x_;</div><div class="line">      <span class="keywordtype">int</span> y_;</div><div class="line">      Item* item_;</div><div class="line">}</div><div class="line"></div><div class="line">PointAndItem::PointAndItem() : x_(0), y_(0), item_(nullptr)</div><div class="line">{</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Correct:</span></div><div class="line"><span class="keyword">class </span>PointAndItem</div><div class="line">{</div><div class="line">   <span class="keyword">private</span>:</div><div class="line">      <span class="keywordtype">int</span> x_{};</div><div class="line">      <span class="keywordtype">int</span> y_{};</div><div class="line">      Item* item_{};</div><div class="line">}</div></div><!-- fragment --></li>
<li>When reimplementing a virtual method, put the <code>virtual</code> and the <code>override</code> keywords in your method declaration.</li>
<li>Only define private fields, never public or protected.</li>
<li>All non-virtual methods that are simple and short should be declared inline. The method definition of inlined methods should appear after the class body: <div class="fragment"><div class="line"><span class="comment">// Wrong:</span></div><div class="line"><span class="keyword">class </span>Cell</div><div class="line">{</div><div class="line">   <span class="keyword">public</span>:</div><div class="line">      <span class="keywordtype">int</span> <a class="code" href="namespaceInformationScripting.html#a5b8e1b48880376022d2eafda1609e2b6">value</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> value_;}</div><div class="line">   <span class="keyword">private</span>:</div><div class="line">      <span class="keywordtype">int</span> value_;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Correct:</span></div><div class="line"><span class="keyword">class </span>Cell</div><div class="line">{</div><div class="line">   <span class="keyword">public</span>:</div><div class="line">      <span class="keywordtype">int</span> <a class="code" href="namespaceInformationScripting.html#a5b8e1b48880376022d2eafda1609e2b6">value</a>() <span class="keyword">const</span>;</div><div class="line">   <span class="keyword">private</span>:</div><div class="line">      <span class="keywordtype">int</span> value_;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">inline</span> <span class="keywordtype">int</span> Cell::value()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> value_;}</div></div><!-- fragment --></li>
<li>Wherever possible prefer to use classes provided by Qt over STL or other libraries.</li>
<li>If you are defining new templates make sure those work across platforms and shared object boundaries.</li>
</ul>
<h2><a class="anchor" id="misc"></a>
Miscellaneous</h2>
<ul>
<li>If you want to introduce dependencies to new libraries, discuss this with a maintainer first.</li>
<li>Generally, do not copy code from other sources to Envision. Small snippets from stack overflow are ok, but large pieces of code or entire files are forbidden. An exception may be made for BSD/MIT licensed files, but you must discuss this with a maintainer first. GPL/LGPL code is not allowed.</li>
</ul>
<h2><a class="anchor" id="further"></a>
Further reading</h2>
<p>Qt is an excellent framework and is used throughout the Envision project. Many Qt conventions have been adopted by Envision. You may want to have a look at:</p><ul>
<li><a href="http://qt-project.org/wiki/Qt_Coding_Style">The Qt Coding Style</a>.</li>
<li><a href="http://qt-project.org/wiki/Coding-Conventions">The Qt Coding Conventions</a></li>
<li><a href="http://qt-project.org/wiki/API-Design-Principles">Qt's API Design Principles</a></li>
<li><a href="http://www4.in.tum.de/~blanchet/api-design.pdf">Qt's API Design Principles (a more elaborate PDF version)</a>.</li>
</ul>
<h1><a class="anchor" id="committing"></a>
Commit policy</h1>
<ul>
<li>A single commit should focus on a single bug fix, or a single aspect of an enhancement. Unrelated changes should be committed separately.</li>
<li>Do not squash multiple commits into one. A bug fix or enhancement should have its own branch that contains all necessary commits.</li>
<li>Always include a commit message which should at a minimum contain at least a title</li>
<li>Commit titles should be limited to 72 characters and use the present tense to indicate what the commit will do: <pre class="fragment">Right: Fix a bug where typing 42 would crash Envision
Wrong: Fixes a bug where typing 42 would crash Envision
Wrong: Fixed a bug where typing 42 would crash Envision
</pre></li>
<li>If the commit title does not sufficiently describe the commit, also include a more detailed commit description. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
