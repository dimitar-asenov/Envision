<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Envision: Architecture of the Envision environment</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Envision
   </div>
   <div id="projectbrief">A visual programming IDE for object-oriented languages</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Architecture of the Envision environment </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In order to allow for new extensions to the basic core of Envision's design features a modular architecture.</p>
<p>This design is inspired by the one of the Eclipse IDE, which has proven its solid foundation and suitability for large scale general-purpose software development.</p>
<h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>The plug-in based architecture of Envision is depicted in the figure below.</p>
<div class="image">
<img src="High-level architecture.png" alt="High-level architecture.png"/>
<div class="caption">
High-level architecture of Engision</div></div>
<p> The design consists of layers, where each layer depends on the ones below it. A layer is just a logical entity and has no representation in the source code. Each layer consists of plug-ins which are implemented as shared libraries and loaded at run time. A plug-in may depend on other plug-ins from the same layer or on plug-ins from lower layers. Circular dependencies are not allowed.</p>
<p>Each plug-in is implemented in a separate namespace. If you want to know more about a particular plug-in, see <a href="namespaces.html">the Namespaces tab</a> and check out the documentation of the corresponding namespace.</p>
<h2><a class="anchor" id="executable-layer"></a>
Executable</h2>
<p>The executable layer, marked with gray, consists only of the application executable. It is solely responsible for loading and managing plug-ins.</p>
<h2><a class="anchor" id="generic-layer"></a>
Generic functionality</h2>
<p>The generic layer, marked with orange, consists of all plug-ins which form the core functionality of Envision. This is where the foundation of the Model-View-Controller approach to programming is established. All other plug-ins rely on and extend the functionality implemented here. This is where the interaction between the different sub-systems is defined and where the interfaces of the generic components are specified. Here is a brief description of each plug-in from this layer: </p><ul>
<li><a class="el" href="namespaceLogger.html" title="The Logger plug-in provides facilities to keep a system log. ">Logger</a> provides a simple means to keep a log of events that have occurred in the system. </li>
<li><a class="el" href="namespaceSelfTest.html" title="The SelfTest plug-in provides a basic unit test framework that can be used by other plug-ins to imple...">SelfTest</a> implements a small test framework for Envision plug-ins. </li>
<li><a class="el" href="namespaceModel.html">ModelBase </a> defines the foundation for application models - ASTs. This includes some basic nodes, concurrent access mechanisms, persistence interfaces and others. </li>
<li><a class="el" href="namespaceVisualization.html">VisualizationBase </a> defines the basic visualization behavior of Envision. It provides graphical representations for the generic nodes defined in ModelBase, a number of layouts, shapes and other useful visual items. </li>
<li><a class="el" href="namespaceInteraction.html">InteractionBase </a> defines the interaction framework that processes user input and modifies the state of Envision. Custom behavior for some of the visualizations in <a class="el" href="namespaceVisualization.html">VisualizationBase </a> is implemented here. </li>
<li><a class="el" href="namespaceFilePersistence.html" title="Thes FilePersistence plug-in implements a file and a clipboard application tree stores based on XML...">FilePersistence</a> implements a persistent store that can save any model to an XML file. Additionally, it provides access to the system clipboard.</li>
</ul>
<h2><a class="anchor" id="specific-layers"></a>
Model specific layers</h2>
<p>Model specific layers, marked with green, consist of plug-ins that are centered around a particular programming model. While different model types (e.g. for scripts or functional programming) can be supported, the current implementation of Envision focuses on the object oriented programming paradigm and its corresponding model.</p>
<p>Here is a description of the OO base plug-ins: </p><ul>
<li><a class="el" href="namespaceOOModel.html">OOModel</a> introduces many new model tree nodes specific for OOP, such as classes, methods, fields etc. </li>
<li><a class="el" href="namespaceOOVisualization.html">OOVisualization</a> implements visualizations for all the constructs in <a class="el" href="namespaceOOModel.html">OOModel</a>. </li>
<li><a class="el" href="namespaceOOInteraction.html">OOInteraction</a> defines mechanisms to create and edit an OO model through its visual representations. </li>
<li>OOCompilation (not yet implemented) will provide means to produce source code from an OO Envision model. The initial plan is to support Java since it is simpler, but eventually support for C++/C# and others should also be implemented. </li>
<li>OOAnalysis (not yet implemented) will define rules and procedures for checking the correctness and consistency of an OO model. This includes type checking, formal verification, etc.</li>
</ul>
<p>Note that this layer is focused on paradigms and features rather than a specific programming language. Thus it is possible to compile an Envision application designed in the OO model to any programming language (Java, C++, C#) as long as there is an appropriate plug-in that provides this service. Of course language dependent plug-in services, such as type checking, should be parameterizable with the desired language.</p>
<p>The last layer consists of some OO extensions which are mainly designed to highlight the flexibility of the Envision environment: </p><ul>
<li><a class="el" href="namespaceCustomMethodCall.html">CustomMethodCall</a> shows how one can register custom visualizations for specific method calls. </li>
<li><a class="el" href="namespaceControlFlowVisualization.html">ControlFlowVisualization</a> makes available an alternative visualization for a method body that explicitly shows the control flow graph. </li>
<li><a class="el" href="namespaceContractsLibrary.html">ContractsLibrary</a> implements a simple C# style <a href="http://research.microsoft.com/en-us/projects/contracts/default.aspx">CodeContracts</a> library with custom visualizations and interaction mechanisms.</li>
</ul>
<h1><a class="anchor" id="qt"></a>
The Qt framework and Envision</h1>
<p>Envision uses the <a href="http://qt-project.org/">Qt framework</a> at the core of its design. Qt is a mature application and UI framework originally designed by Trolltech, later developed by Nokia, and currently maintained as an open-source community effort. The framework is released under the LGPL2 license and is available on many different platforms including Linux, Microsoft Windows, Mac OS X and others. It is natively written in C++ but bindings to many other languages are also available. Thanks to this and to the exceptionally good quality of its documentation, Qt enjoys a vast community of developers who target the platform and offer support to others.</p>
<p>Here are some of the more important features of Qt that Envision uses: </p><ul>
<li>Cross-platform development - Qt greatly simplifies the process of writing cross-platform code by providing a single interface to many features commonly present in different operating systems, such as shared libraries, input devices and synchronization mechanisms for multi-threaded programming. </li>
<li>Better collections - the collection classes offered by Qt have a richer interface and are generally more convenient compared to their alternatives from the C++ standard library. </li>
<li>Unicode strings - Qt provides true Unicode character and string classes. Although this feature is now natively supported in C++11, when the project was started C++ did not offer a good solution. </li>
<li>XML processing - classes for working with XML files and data structures are provided and different access methods are supported (DOM and SAX). </li>
<li>Excellent graphics framework - <a href="qt-project.org/doc/graphicsview.html">Qt’s GraphicsView framework</a> is a perfect match for Envision’s visualization requirements. It offers a powerful toolkit for designing custom visualizations and managing huge hierarchies of graphical objects. It also supports rendering through OpenGL for optimized user experience.</li>
</ul>
<h1><a class="anchor" id="plug-in-extension"></a>
Plug-in extensions</h1>
<p>Except for a few service tasks all of the functionality of Envision is provided by plug-ins. A plug-in may use the services of other plug-ins and provide services that others can use. The architecture does not enforce any particular mechanism to achieve this and is very flexible in this respect. The plug-in developer can choose how to offer services to others. Here are two suggestions which are currently used in Envision: </p><ul>
<li>Using interfaces - a plug-in might offer interface classes (abstract classes with pure virtual methods) to others which request its services. The actual implementation of the functionality is done in derived classes which are private to the plug-in. This approach is flexible: as long as the interface is fixed the implementation can change in any way and client code will not need to be recompiled or adjusted. The drawback is that code cannot be reused, since clients are only aware of the interfaces. </li>
<li>Using classes - as an alternative a plug-in can instead export a complete class together with all other classes from its inheritance hierarchy. Clients can then further extend this hierarchy and reuse functionality from base classes. The drawback of this approach is that changes to base classes might more easily invalidate client code and require recompilation.</li>
</ul>
<p>Envision uses primarily the second approach, but also employs interfaces. This is typical for C++ systems: Qt for instance, also exports complete classes which clients can inherit from and extend. This provides a more natural way to use the library. Special techniques such as using a <a href="http://qt-project.org/wiki/Dpointer">"d-pointer" developed by Trolltech’s Arnt Gulbrandsen</a> can mitigate the problems of this approach. This technique together with some other considerations are discussed <a href="http://techbase.kde.org/Policies/Binary_Compatibility_Issues_With_C++">here</a>.</p>
<p>Regardless of what way plug-ins offer services to others. This is always done via exporting symbols. These could be classes, functions or global variables. Although there is no enforced restriction, the exporting of functions or variables is strongly discouraged and not used within Envision. Exporting of classes (including static methods and static fields) is supported by Envision by using built-in functionality provided by the Qt framework. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
